<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" type="text/css" href="style.css">
  <title>Resilient Rebuilding Guide</title>
  <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <link rel="preconnect" href="https://{s}.tile.openstreetmap.org" crossorigin>
  <link rel="stylesheet" href="https://unpkg.com/modern-css-reset/dist/reset.min.css"/>
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
</head>
<body>
<div class="app">
  <nav>
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <h1>Rebuilding Guide</h1>
    </div>

    <div class="search">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.2-4.2M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
      <input id="search" placeholder="Search sectionsâ€¦" />
    </div>

    <div class="toc" id="toc">
      <div class="group">Guide</div>
      <a href="#overview">Overview</a>
      <a href="#tools">Tools & Checklists</a>
      <a href="#wildfire-tools">Wildfires</a>
      <a href="#mapSection">Map</a>
    </div>
  </nav>

  <main>
    <section class="hero" id="overview">
      <div>
        <span class="badge">Wildfire Resilience</span>
        <h2>Resilient, Equitable, Community-Oriented Rebuilding</h2>
        <div class="actions">
          <button class="btn brand" onclick="window.print()">Print / Save as PDF</button>
          <button class="btn" id="expandAll">Expand all</button>
          <button class="btn" id="collapseAll">Collapse all</button>
        </div>
      </div>
      <div class="panel">
        <h3>Quick Links</h3>
        <div class="chips">
          <a class="chip" href="#tools">Home-Hardening Checklist</a>
          <a class="chip" href="#wildfire-tools">Wildfire Events</a>
        </div>
      </div>
    </section>

    <section class="panel" id="tools">
      <h3>Home-Hardening & Safety Tools</h3>
      <div class="grid cols-2">
        <div>
          <h4>Home-Hardening Checklist</h4>
          <div id="checklist" class="checklist"></div>
          <div class="small" id="progress">0 of 10 completed</div>
        </div>
        <div>
          <h4>Tank Sizing Estimator</h4>
          <div class="calc">
            <div class="row">
              <label>Roof catchment area (sq ft)
                <input id="roofArea" type="number" value="1500" min="0" />
              </label>
              <label>Annual rainfall (inches)
                <input id="rainIn" type="number" value="18" min="0" />
              </label>
              <label>Capture efficiency
                <select id="eff">
                  <option value="0.75" selected>75% (typical)</option>
                  <option value="0.85">85% (good)</option>
                  <option value="0.9">90% (excellent)</option>
                </select>
              </label>
            </div>
            <div class="row">
              <label>Emergency draw (gpm)
                <input id="gpm" type="number" value="10" min="0" />
              </label>
              <label>Fire duration (minutes)
                <input id="minutes" type="number" value="30" min="0" />
              </label>
              <label>Domestic reserve (days @ 50 gpd/person, 3 ppl)
                <input id="days" type="number" value="3" min="0" />
              </label>
            </div>
            <button class="btn brand" id="calcBtn">Calculate</button>
            <p class="result" id="tankResult" aria-live="polite"></p>
          </div>
        </div>
      </div>
    </section>

    <!-- Wildfire query panel (clean UI) -->
    <section class="panel" id="wildfire-tools">
      <h3>Wildfire Events</h3>
      <p class="small">Enter an area and time window. Results will appear below and on the map.</p>

      <form id="wf-form" class="wf-form">
        <fieldset class="wf-fieldset">
          <legend>Area</legend>
          <div class="wf-row">
            <label>Min Longitude <input type="number" step="0.01" id="wfMinLon" value="0" required></label>
            <label>Min Latitude  <input type="number" step="0.01" id="wfMinLat" value="0" required></label>
            <label>Max Longitude <input type="number" step="0.01" id="wfMaxLon" value="0" required></label>
            <label>Max Latitude  <input type="number" step="0.01" id="wfMaxLat" value="0" required></label>
          </div>
        </fieldset>

        <fieldset class="wf-fieldset">
          <legend>Time window</legend>
          <div class="wf-row">
            <label>Days look-back <input type="number" min="0" id="wfDays" value="0"></label>
            <span class="wf-or" aria-hidden="true">or</span>
            <label>Start <input type="date" id="wfStart"></label>
            <label>End <input type="date" id="wfEnd"></label>
          </div>
        </fieldset>

        <div class="wf-actions">
          <button type="submit" id="wfRun" class="btn brand">Fetch Wildfires</button>
          <button type="button" id="wfClear" class="btn">Clear</button>
        </div>
      </form>

      <div class="wf-results">
        <div id="wfSummary" class="wf-summary" role="status" aria-live="polite">No data yet.</div>

        <div class="wf-table-wrap">
          <table class="wf-table" id="wfTable">
            <thead>
              <tr>
                <th>#</th>
                <th>Date</th>
                <th>Title</th>
                <th>Latitude</th>
                <th>Longitude</th>
                <th>Status</th>
                <th>Sources</th>
              </tr>
            </thead>
            <tbody id="wfTbody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <section class="panel" id="mapSection">
      <h3>Map: Recovery Hubs & Wildfire Pins</h3>
      <div id="map" role="region" aria-label="Map of recovery hubs and wildfires"></div>
    </section>

    <footer>
      <div>Built from your Altadena Fire Rebuild plan.</div>
      <div class="small">Accessibility: keyboard navigation, focusable controls, reduced motion, print stylesheet.</div>
    </footer>
  </main>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script src="script.js"></script>
</body>
</html>

